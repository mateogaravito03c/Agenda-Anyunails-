<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Agenda ManicurÃ­a</title>

<style>
*{box-sizing:border-box;font-family:'Segoe UI',sans-serif}
body{background:linear-gradient(135deg,#fde2e4,#f9c5d1);padding:20px;}
.container{max-width:900px;margin:auto;background:#fff;padding:25px;border-radius:18px;box-shadow:0 20px 40px rgba(233,30,99,.25);}
h1{text-align:center;color:#e91e63}
h2{color:#9c27b0;border-left:6px solid #e91e63;padding-left:10px;margin-top:25px;}
input,select{width:100%;padding:10px;border-radius:10px;border:1px solid #ddd;background:#fff0f5;margin-bottom:10px;}
button{background:linear-gradient(135deg,#e91e63,#9c27b0);color:white;border:none;padding:10px 18px;border-radius:12px;cursor:pointer;}
button:hover{transform:scale(1.05)}
.cita{background:#fce4ec;border-left:8px solid #e91e63;padding:15px;border-radius:14px;margin-top:15px;}
.acciones{display:flex;gap:8px;flex-wrap:wrap}
.btn-borrar{background:#f44336}
</style>
</head>

<body>
<div class="container">

<h1>ğŸ’… Agenda de ManicurÃ­a</h1>

<h2>â• Agendar cita</h2>
<form id="formCita">
  <input id="nombre" placeholder="Nombre del cliente" required>
  <input id="direccion" placeholder="DirecciÃ³n del cliente" required>
  <input id="telefono" placeholder="TelÃ©fono del cliente" required>
  <input type="date" id="fecha" required>
  <select id="hora" required>
    <option value="">Hora</option>
    <option>09:00</option>
    <option>12:00</option>
    <option>15:00</option>
    <option>18:00</option>
    <option>21:00</option>
  </select>
  <button>Guardar cita</button>
</form>

<h2>ğŸ“… Citas agendadas</h2>
<div id="listaCitas"></div>

</div>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<script>
const CLAVE = "anyu2025";

// ConfiguraciÃ³n de Firebase
const firebaseConfig = {
  apiKey: "AIzaSyAkI8b0ivXClBtnVWudu2p1GiMN-yRn4DU",
  authDomain: "anyunails.firebaseapp.com",
  projectId: "anyunails",
  storageBucket: "anyunails.firebasestorage.app",
  messagingSenderId: "763898100432",
  appId: "1:763898100432:web:e32720846e9a5c1d207cd5"
};

// Inicializar Firebase
firebase.initializeApp(firebaseConfig);
const db = firebase.database();

const formCita = document.getElementById("formCita");
const listaCitas = document.getElementById("listaCitas");
const fecha = document.getElementById("fecha");
const nombre = document.getElementById("nombre");
const direccion = document.getElementById("direccion");
const telefono = document.getElementById("telefono");

// Fecha mÃ­nima
fecha.min = new Date().toISOString().split("T")[0];

// Guardar cita
formCita.onsubmit = e => {
  e.preventDefault();
  const nuevaCita = {
    nombre: nombre.value,
    direccion: direccion.value,
    telefono: telefono.value,
    fecha: fecha.value,
    hora: document.getElementById("hora").value
  };
  const citaId = Date.now();
  db.ref("citas/" + citaId).set(nuevaCita)
    .then(() => {
      alert("âœ… Cita agendada");
      formCita.reset();
    });
};

// Escuchar cambios en tiempo real con clave
let claveAutorizada = false;
function cargarCitas(){
  db.ref("citas").on("value", snapshot => {
    if(!claveAutorizada){
      if(prompt("Clave para ver citas") !== CLAVE) return;
      claveAutorizada = true;
    }
    listaCitas.innerHTML = "";
    const citas = snapshot.val();
    if(citas){
      for(let id in citas){
        const c = citas[id];
        const d = document.createElement("div");
        d.className = "cita";
        d.innerHTML = `
          <strong>${c.nombre}</strong><br>
          ğŸ“ ${c.direccion}<br>
          ğŸ“ ${c.telefono}<br>
          ğŸ“… ${c.fecha} â° ${c.hora}
          <div class="acciones">
            <button class="btn-borrar" onclick="borrarCita('${id}')">ğŸ—‘ï¸ Borrar</button>
          </div>`;
        listaCitas.appendChild(d);
      }
    }
  });
}
cargarCitas();

// Borrar cita
function borrarCita(id){
  if(prompt("Clave para borrar") !== CLAVE) return alert("âŒ Clave incorrecta");
  db.ref("citas/" + id).remove();
}
</script>
</body>
</html>
